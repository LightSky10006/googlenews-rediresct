<form action="<?php echo _url('extension', 'configure', 'e', urlencode($this->getName())); ?>" method="post">
    <input type="hidden" name="_csrf" value="<?php echo FreshRSS_Auth::csrfToken(); ?>" />

    <div class="form-group">
        <label class="group-name" for="cache-ttl">快取 TTL (秒)</label>
        <div class="group-controls">
            <input id="cache-ttl" name="cache_ttl" type="number" min="60" step="60" value="<?php echo FreshRSS_Context::$user_conf->GoogleNewsCleanTTL ?? 604800; ?>" style="width:160px;">
        </div>
    </div>
    
    <div class="form-group">
        <label class="group-name" for="cache-max">快取最大筆數</label>
        <div class="group-controls">
            <input id="cache-max" name="cache_max" type="number" min="10" step="10" value="<?php echo FreshRSS_Context::$user_conf->GoogleNewsCleanMax ?? 1000; ?>" style="width:160px;">
        </div>
    </div>

    <div class="form-group">
        <label class="group-name">選擇要處理的 Feeds</label>
        <div class="group-controls">
            <?php 
            $feeds = FreshRSS_Factory::createFeedDao()->listFeeds();
            ?>
            <?php foreach ($feeds as $id => $feed): ?>
                <li class="form-group">
                    <input type="checkbox" id="feed-<?php echo $id; ?>" name="GoogleNewsCleanFeeds[<?php echo $id; ?>]" value="1" <?php if (isset(FreshRSS_Context::$user_conf->GoogleNewsCleanFeeds[$id]) && FreshRSS_Context::$user_conf->GoogleNewsCleanFeeds[$id] == '1') echo ' checked="checked"'; ?>>
                    <span class="feed-name"><?php echo $feed->name(); ?></span>
                </li>
            <?php endforeach; ?>
        </div>
    </div>

    <div class="form-group form-actions">
        <div class="group-controls">
            <button type="submit" class="btn btn-important"><?php echo _t('gen.action.submit'); ?></button>
            <button type="reset" class="btn"><?php echo _t('gen.action.cancel'); ?></button>
            <button type="submit" class="btn" name="clear_cache" value="1" onclick="return confirm('確定清除快取？');">清除快取</button>
        </div>
    </div>
</form>
